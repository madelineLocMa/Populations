<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Population Pyramid: Collin County (2023)</title>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <style>
        body {
            font-family: 'Montserrat', sans-serif;
            font-weight: bold;
            font-size: larger;
            text-align: center;
        }
        .container {
            display: flex;
            justify-content: center;
        }
        .chart {
            width: 50%;
        }
    </style>
</head>
<body>
    <h2>Population Pyramid: Collin County (2023)</h2>
    <div class="container">
        <div id="collin_pyramid" class="chart"></div>
    </div>
    <script>
        var ageGroups = ['Under 5 years', '5 to 9 years', '10 to 14 years', '15 to 19 years',
            '20 to 24 years', '25 to 29 years', '30 to 34 years', '35 to 39 years',
            '40 to 44 years', '45 to 49 years', '50 to 54 years', '55 to 59 years',
            '60 to 64 years', '65 to 69 years', '70 to 74 years', '75 to 79 years',
            '80 to 84 years', '85 years and over'];

        var collinMale = [33159, 40044, 42747, 43846, 32858, 33998, 37796, 37742, 34521, 30479, 27162, 23758, 21024, 16168, 12651, 8137, 5014, 2596];
        var collinFemale = [31846, 37995, 41653, 40354, 32081, 33846, 37767, 37668, 35088, 31277, 28426, 25391, 23217, 18952, 15694, 11398, 8598, 5369];

        function createPyramid(divId, maleData, femaleData, title) {
            var trace1 = {
                x: maleData.map(x => -x),
                y: ageGroups,
                name: 'Male',
                orientation: 'h',
                type: 'bar',
                marker: { color: 'blue' }
            };

            var trace2 = {
                x: femaleData,
                y: ageGroups,
                name: 'Female',
                orientation: 'h',
                type: 'bar',
                marker: { color: 'red' }
            };

            var layout = {
                title: title,
                barmode: 'overlay',
                bargap: 0.1,
                xaxis: {
                    title: 'Population',
                    tickvals: [-5000, -2500, 0, 2500, 5000],
                    ticktext: [5000, 2500, 0, 2500, 5000],
                    range: [-6000, 6000]
                },
                yaxis: {
                    title: 'Age Groups',
                    autorange: 'reversed'
                },
                legend: { x: 0.8, y: 1 }
            };

            Plotly.newPlot(divId, [trace1, trace2], layout);
        }

        createPyramid('collin_pyramid', collinMale, collinFemale, 'Collin County Population Pyramid');
    </script>
</body>
</html>
