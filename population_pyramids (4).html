<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Collin County and United States Population Breakdown by Age and Sex 2023</title>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <style>
        body {
            font-family: 'Montserrat', sans-serif;
            font-weight: bold;
            font-size: larger;
            text-align: center;
            background-color: white;
            margin: 0;
            padding: 0;
        }
        .container {
            display: flex;
            justify-content: center;
            align-items: center;
            flex-wrap: wrap;
            width: 100%;
        }
        .chart {
            width: 48%;
            min-width: 500px;
            height: 600px;
        }
    </style>
</head>
<body>
    <h2>Collin County and United States Population Breakdown by Age and Sex 2023</h2>
    <div class="container">
        <div id="collin_pyramid" class="chart"></div>
        <div id="usa_pyramid" class="chart"></div>
    </div>
    <script>
        var ageGroups = ['85+', '80-84', '75-79', '70-74', '65-69', '60-64', '55-59', '50-54', '45-49', '40-44',
                         '35-39', '30-34', '25-29', '20-24', '15-19', '10-14', '5-9', '0-4'];

        var collinMale = [2596, 5014, 8137, 12651, 16168, 21024, 23758, 27162, 30479, 34521, 
                          37742, 37796, 33998, 32858, 43846, 42747, 40044, 33159].map(x => -x);

        var collinFemale = [5369, 8598, 11398, 15694, 18952, 23217, 25391, 28426, 31277, 35088, 
                            37668, 37767, 33846, 32081, 40354, 41653, 37995, 31846];

        var collinTrace1 = {
            x: collinMale,
            y: ageGroups,
            name: 'Male',
            orientation: 'h',
            type: 'bar',
            marker: { color: '#0a667b' }, // Dark blue
            text: collinMale.map(Math.abs), // Ensure hover labels show positive values
            hovertemplate: '<b>Male</b>: %{text}<extra></extra>'
        };

        var collinTrace2 = {
            x: collinFemale,
            y: ageGroups,
            name: 'Female',
            orientation: 'h',
            type: 'bar',
            marker: { color: '#e3a5a5' }, // Pale pink
            text: collinFemale,
            hovertemplate: '<b>Female</b>: %{text}<extra></extra>'
        };

        var collinLayout = {
            title: 'Collin County',
            barmode: 'overlay',
            bargap: 0.1,
            width: 600,
            height: 600,
            xaxis: { title: 'Population', tickvals: [-40000, -30000, -20000, -10000, 0, 10000, 20000, 30000, 40000], ticktext: ['40k', '30k', '20k', '10k', '0', '10k', '20k', '30k', '40k'] },
            yaxis: { title: 'Age Group', autorange: 'reversed', title_standoff: 15 },
            showlegend: true
        };

        Plotly.newPlot('collin_pyramid', [collinTrace1, collinTrace2], collinLayout);

        var usaMale = [2395125, 3033322, 5296221, 7326113, 9338450, 11239012, 11453809, 11618425, 11821447, 12104235, 
                       12368244, 12503112, 12784961, 12911145, 11651851, 11042088, 10425999, 9535485].map(x => -x);

        var usaFemale = [3999528, 4038109, 6221752, 8219174, 10006551, 11872153, 12130488, 12451245, 12738952, 13058211, 
                         13289875, 13502367, 13842511, 14012581, 10957887, 10419078, 9902748, 9108193];

        var usaTrace1 = {
            x: usaMale,
            y: ageGroups,
            name: 'Male',
            orientation: 'h',
            type: 'bar',
            marker: { color: '#0a667b' }, // Dark blue
            text: usaMale.map(Math.abs), // Ensure hover labels show positive values
            hovertemplate: '<b>Male</b>: %{text}<extra></extra>'
        };

        var usaTrace2 = {
            x: usaFemale,
            y: ageGroups,
            name: 'Female',
            orientation: 'h',
            type: 'bar',
            marker: { color: '#e3a5a5' }, // Pale pink
            text: usaFemale,
            hovertemplate: '<b>Female</b>: %{text}<extra></extra>'
        };

        var usaLayout = {
            title: 'United States',
            barmode: 'overlay',
            bargap: 0.1,
            width: 600,
            height: 600,
            xaxis: { title: 'Population', tickvals: [-15000000, -10000000, -5000000, 0, 5000000, 10000000, 15000000], ticktext: ['15

